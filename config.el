;;; $DOOMDIR/config.el -*- lexical-binding: t; -*-

(setq user-full-name "Ricardo Piro-Rael"
      user-mail-address "fdisk87@yahoo.com")

;; These sizes should look good on any screen
(let* (
       (font-size-by-width (/ (display-pixel-width) 96))
       (font-size-by-height (/ (display-pixel-height) 54))
       (fdisk-font-size (min font-size-by-width font-size-by-height))
       )
  (setq doom-font (font-spec :family "InconsolataLGC Nerd Font" :size fdisk-font-size)
        doom-variable-pitch-font (font-spec :family "sans" :size fdisk-font-size))
  )

(setq doom-theme 'doom-molokai)

;; Splash screen
(setq fancy-splash-image "~/Pictures/favicon.png")
(defun doom-dashboard-draw-ascii-banner-fn ()
  (let* ((banner
          '(
            "@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@.......@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@"
            "@@@@@@@@@@@@@@@@@@@@@@@@@@.............................@@@@@@@@@@@@@@@@@@@@@@@@@"
            "@@@@@@@@@@@@@@@@@@@@@,.......,,..,,,,,,,,,,,,.,..,,,.,,,,,,,@@@@@@@@@@@@@@@@@@@@"
            "@@@@@@@@@@@@@@@@@#,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,@@@@@@@@@@@@@@@@"
            "@@@@@@@@@@@@@@###,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,@@@@@@@@@@@@@"
            "@@@@@@@@@@@*****,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,@@@@@@@@@@"
            "@@@@@@@@@******,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,@@@@@@@@"
            "@@@@@@@########,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,@@@@@@"
            "@@@@@@********,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,@@@@@"
            "@@@@##########,,,,,,,*,*,**,,,***,,**,,***,*,*,,****,***,*,*****************/@@@"
            "@@@###########****************************************************************@@"
            "@@*****************************************************************************@"
            "@&############*****************************************************************@"
            "@%%%%%%%%%%%%%******************************************************************"
            "@*******************************************************************************"
            "%%%%%%%%%%%%%%%%****************************************************************"
            "%%%%%%%%%%%%%%%%****************************************************************"
            "%%%%%%%%%%%%%%%%%///////////////////////////////////////////////////////////////"
            "@%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@"
            "@%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@"
            "@@%%%%%%%%%%%%%%%%%%%%/////////////////////////////////////////////////////////@"
            "@@%%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@"
            "@@@%%%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@"
            "@@@@%%%%%%%%%%%%%%%%%%%%%%%%%///////////////////////////////////////////////#@@@"
            "@@@@@@%%%%%%%%&&&%%&&&&&&&&&&&&&&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@"
            "@@@@@@@&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&((((((((((((((((((((((((((((((((&&&&@@@@@@"
            "@@@@@@@@@&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&(((((((((((((((((%&&&&&&&&&@@@@@@@@"
            "@@@@@@@@@@@&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&@@@@@@@@@@@"
            "@@@@@@@@@@@@@@&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&@@@@@@@@@@@@@"
            "@@@@@@@@@@@@@@@@@&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&@@@@@@@@@@@@@@@@"
            "@@@@@@@@@@@@@@@@@@@@@&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&@@@@@@@@@@@@@@@@@@@@"
            "@@@@@@@@@@@@@@@@@@@@@@@@@@@&&&&&&&&&&&&&&&&&&&&&&&&&&&@@@@@@@@@@@@@@@@@@@@@@@@@@"
            ))
         (longest-line (apply #'max (mapcar #'length banner))))
    (put-text-property
     (point)
     (dolist (line banner (point))
       (insert (+doom-dashboard--center
                +doom-dashboard--width
                (concat
                 line (make-string (max 0 (- longest-line (length line)))
                                   32)))
               "\n"))
     'face 'doom-dashboard-banner)))

(setq org-directory "~/org/")

(setq display-line-numbers-type t)

;; Make windowed emacs behave like shell emacs (needed for pytests)
(when (memq window-system '(mac ns x))
  (exec-path-from-shell-initialize))

;; start every frame maximized
;; This prevents the font from being the wrong size
(add-to-list 'default-frame-alist '(fullscreen . maximized))

(global-display-fill-column-indicator-mode)
(set-fill-column 100)

;; accept completion from copilot and fallback to company
;; https://github.com/zerolfx/copilot.el/blob/e11847ab0c3b183a1e53fbc1ac587de82912b9cf/readme.md?plain=1#L39
(use-package! copilot
  :hook (prog-mode . copilot-mode)
  :bind (:map copilot-completion-map
              ("<tab>" . 'copilot-accept-completion)
              ("TAB" . 'copilot-accept-completion)
              ("C-TAB" . 'copilot-accept-completion-by-word)
              ("C-<tab>" . 'copilot-accept-completion-by-word)))
